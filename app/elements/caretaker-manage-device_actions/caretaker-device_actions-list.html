<link rel="import" href="../../lib/grapp-app-globals/grapp-app-globals.html">
<link rel="import" href="../../lib/grapp-breadcrumbs/grapp-breadcrumbs.html">
<link rel="import" href="../../lib/grapp-i18n-js/grapp-i18n-js.html">
<link rel="import" href="../../lib/grapp-rest-resource/grapp-rest-resource.html">
<link rel="import" href="../caretaker-data-table/caretaker-data-table.html">

<dom-module id="caretaker-device_actions-list">

  <template>

    <grapp-app-globals>
      <grapp-app-globals-get key="apiUrl" value="{{apiUrl}}"></grapp-app-globals-get>
      <grapp-app-globals-set key="appTitle" value="models.device_action.other"></grapp-app-globals-set>
      <grapp-app-globals-set key="appModule" value="devices"></grapp-app-globals-set>
      <grapp-app-globals-set key="appFunction" value="device_actions"></grapp-app-globals-set>
    </grapp-app-globals>

    <grapp-rest-resource base-url="[[apiUrl]]" path="/device_actions/:id" resource="{{device_actions}}"
                         token="[[token]]"></grapp-rest-resource>

    <grapp-iron-ajax id="executeActionRequest" base-url="[[apiUrl]]"
                     path="[[_executeActionPath(actionId)]]"
                     method="PUT" handleAs="json" token="[[token]]">
    </grapp-iron-ajax>

    <grapp-breadcrumbs path="/device_actions">
      <grapp-breadcrumb href="/#/device_actions">[[i18n('models.device_action.other')]]</grapp-breadcrumb>
    </grapp-breadcrumbs>

    <caretaker-data-table id="table" model="device_action" resource="{{device_actions}}"
                          on-data-table-edit="_edit" on-data-table-new="_new">

      <caretaker-data-action icon="play" on-fire="_executeAction"></caretaker-data-action>

      <caretaker-data-column name="name" width="20"></caretaker-data-column>
      <caretaker-data-column name="description" width="80"></caretaker-data-column>

    </caretaker-data-table>

  </template>

  <script src="caretaker-device_actions-list.js"></script>

</dom-module>
