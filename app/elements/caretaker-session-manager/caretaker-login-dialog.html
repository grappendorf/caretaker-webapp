<link rel="import" href="../../lib/iron-icon/iron-icon.html">
<link rel="import" href="../../lib/iron-icons/iron-icons.html">
<link rel="import" href="../../lib/paper-button/paper-button.html">
<link rel="import" href="../../lib/paper-dialog/paper-dialog.html">
<link rel="import" href="../../lib/paper-spinner/paper-spinner.html">
<link rel="import" href="../../lib/grapp-i18n-js/grapp-i18n-js.html">
<link rel="import" href="../../lib/grapp-paper-input/grapp-paper-input.html">

<dom-module id="caretaker-login-dialog">

  <template>

    <paper-dialog id="dialog" on-iron-input-validate="_validate" on-grapp-paper-input-enter="_login">

      <h2 class="layout horizontal justified">
        <span>[[i18n('message.please_log_on')]]</span>
        <paper-spinner active$="[[processing]]"></paper-spinner>
      </h2>

      <div class="vertical layout">
        <grapp-paper-input id="email"
                           label="[[i18n('attributes.user.email')]]"
                           autofocus$="[[!_isPresent(email)]]"
                           value="{{email}}"
                           required
                           auto-validate$="[[validate]]"
                           error-message="[[i18n('message.error_empty_email')}}">
        </grapp-paper-input>

        <grapp-paper-input id="password"
                           label="[[i18n('attributes.user.password')]]"
                           type="password"
                           autofocus$="[[_isPresent(email)]]"
                           value="{{password}}"
                           required
                           auto-validate$="[[validate]]"
                           error-message="[[i18n('message.error_empty_password')}}">
        </grapp-paper-input>
      </div>

      <template is="dom-if" if="[[error]]">
        <div class="error-message">[[error]]</div>
      </template>

      <div class="buttons">
        <paper-button raised primary disabled$="[[!valid]]" on-tap="_login">
          <iron-icon icon="check"></iron-icon>
          <span>[[i18n('action.sign_in')]]</span>
        </paper-button>

        <paper-button raised secondary dialog-confirm>
          <iron-icon icon="cancel"></iron-icon>
          <span>[[i18n('action.cancel')]]</span>
        </paper-button>
      </div>

    </paper-dialog>

  </template>

  <script src="caretaker-login-dialog.js"></script>

</dom-module>
