<link rel="import" href="../../lib/grapp-app-globals/grapp-app-globals.html">
<link rel="import" href="../../lib/grapp-breadcrumbs/grapp-breadcrumbs.html">
<link rel="import" href="../../lib/grapp-i18n-js/grapp-i18n-js.html">
<link rel="import" href="../../lib/grapp-rest-resource/grapp-rest-resource.html">
<link rel="import" href="../caretaker-data-editor/caretaker-data-editor.html">

<dom-module id="caretaker-devices-editor">

  <template>

    <grapp-app-globals>
      <grapp-app-globals-get key="apiUrl" value="{{apiUrl}}"></grapp-app-globals-get>
      <grapp-app-globals-set key="appTitle" value="models.device.other"></grapp-app-globals-set>
      <grapp-app-globals-set key="appModule" value="devices"></grapp-app-globals-set>
      <grapp-app-globals-set key="appFunction" value="devices"></grapp-app-globals-set>
    </grapp-app-globals>

    <grapp-rest-resource base-url="[[apiUrl]]" path="/devices/:id"
                         new-path="/:type" create-path="/:type" update-path="/:type/:id"
                         params="[[_devicesParams(type)]]" resource="{{devices}}"
                         token="[[token]]"></grapp-rest-resource>

    <grapp-breadcrumbs>
      <grapp-breadcrumb href="/#/devices" label="[[i18n('models.device.other')]]"></grapp-breadcrumb>
      <grapp-breadcrumb label="[[device.name]]"></grapp-breadcrumb>
    </grapp-breadcrumbs>

    <caretaker-data-editor id="editor" model="device" resource="{{devices}}"
                           item="{{device}}" on-data-editor-back="_back">

      <caretaker-data-fieldset label="[[i18n('models.device.one')]]" icon="gears">
        <caretaker-data-field name="name"></caretaker-data-field>
        <caretaker-data-field name="address"></caretaker-data-field>
        <caretaker-data-field name="uuid"></caretaker-data-field>
        <caretaker-data-field name="description"></caretaker-data-field>
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.cipcam_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'CipcamDevice')]]">
        <caretaker-data-field name="user" model="cipcam_device"></caretaker-data-field>
        <caretaker-data-field name="password" model="cipcam_device"></caretaker-data-field>
        <caretaker-data-field name="refresh_interval" model="cipcam_device"></caretaker-data-field>
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.dimmer_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'DimmerDevice')]]">
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.dimmer_rgb_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'DimmerRgbDevice')]]">
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.easyvr_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'EasyvrDevice')]]">
        <caretaker-data-field name="num_buttons" model="easyvr_device"></caretaker-data-field>
        <caretaker-data-field name="buttons_per_row" model="easyvr_device"></caretaker-data-field>
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.philips_hue_light_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'PhilipsHueLightDevice')]]">
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.reflow_oven_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'ReflowOvenDevice')]]">
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.remote_control_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'RemoteControlDevice')]]">
        <caretaker-data-field name="num_buttons" model="remote_control_device"></caretaker-data-field>
        <caretaker-data-field name="buttons_per_row" model="remote_control_device"></caretaker-data-field>
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.rotary_knob_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'RotaryKnobDevice')]]">
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.sensor_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'SensorDevice')]]">
      </caretaker-data-fieldset>

      <caretaker-data-fieldset label="[[i18n('models.switch_device.one')]]"
                               image="[[_imagePath(device.large_icon)]]"
                               optional enabled$="[[_equals(device.type, 'SwitchDevice')]]">
        <caretaker-data-field name="num_switches" model="switch_device"></caretaker-data-field>
        <caretaker-data-field name="switches_per_row" model="switch_device"></caretaker-data-field>
      </caretaker-data-fieldset>

    </caretaker-data-editor>

  </template>

  <script src="../caretaker-utils/caretaker-utils-behavior.js"></script>
  <script src="caretaker-devices-editor.js"></script>

</dom-module>
